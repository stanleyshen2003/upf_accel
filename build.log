ssh ubuntu@192.168.100.2 "export PKG_CONFIG_PATH=/opt/mellanox/doca/lib/aarch64-linux-gnu/pkgconfig:/opt/mellanox/dpdk/lib/aarch64-linux-gnu/pkgconfig:\$PKG_CONFIG_PATH && cd /opt/mellanox/doca/applications/upf_accel/.. && rm -rf /tmp/build && meson setup /tmp/build && ninja -C /tmp/build"
The Meson build system
Version: 1.3.2
Source dir: /opt/mellanox/doca/applications
Build dir: /tmp/build
Build type: native build
Program cat found: YES (/usr/bin/cat)
Project name: DOCA_APPLICATIONS
Project version: 3.2.0118
C compiler for the host machine: cc (gcc 13.3.0 "cc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0")
C linker for the host machine: cc ld.bfd 2.42
C++ compiler for the host machine: c++ (gcc 13.3.0 "c++ (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0")
C++ linker for the host machine: c++ ld.bfd 2.42
Host machine cpu family: aarch64
Host machine cpu: aarch64
Program nvlink found: NO
meson.build:67: WARNING: CUDA was not found (nvlink) - Disabling GPU support!
Program protoc found: YES (/usr/bin/protoc)
Program grpc_cpp_plugin found: YES (/usr/bin/grpc_cpp_plugin)
Program grpc_python_plugin found: YES (/usr/bin/grpc_python_plugin)
Found pkg-config: YES (/usr/bin/pkg-config) 1.8.1
Run-time dependency protobuf found: YES 3.21.12
Run-time dependency grpc++ found: YES 1.51.1
Program cp found: YES (/usr/bin/cp)
Program dpacc found: YES (/opt/mellanox/doca/tools/dpacc)
Run-time dependency threads found: YES
Checking for function "strlcpy" : YES 
Run-time dependency doca-common found: YES 3.2.0118
Header "doca_build_config.h" has symbol "DOCA_ARCH_DPU" with dependency doca-common: YES 
meson.build:333: WARNING: Skipping compilation of DOCA Application - app_shield_agent.
meson.build:333: WARNING: Skipping compilation of DOCA Application - bifurcated_driver_model.
meson.build:333: WARNING: Skipping compilation of DOCA Application - dma_copy.
meson.build:333: WARNING: Skipping compilation of DOCA Application - dpa_all_to_all.
meson.build:333: WARNING: Skipping compilation of DOCA Application - dpu_gpu_remote_offload.
meson.build:333: WARNING: Skipping compilation of DOCA Application - eth_l2_fwd.
meson.build:333: WARNING: Skipping compilation of DOCA Application - file_compression.
meson.build:333: WARNING: Skipping compilation of DOCA Application - file_integrity.
meson.build:333: WARNING: Skipping compilation of DOCA Application - gpu_packet_processing.
meson.build:333: WARNING: Skipping compilation of DOCA Application - ip_frag.
meson.build:333: WARNING: Skipping compilation of DOCA Application - ipsec_security_gw.
meson.build:333: WARNING: Skipping compilation of DOCA Application - nvme_emulation.
meson.build:333: WARNING: Skipping compilation of DOCA Application - pcc.
meson.build:333: WARNING: Skipping compilation of DOCA Application - psp_gateway.
meson.build:333: WARNING: Skipping compilation of DOCA Application - secure_channel.
meson.build:333: WARNING: Skipping compilation of DOCA Application - simple_fwd_vnf.
meson.build:333: WARNING: Skipping compilation of DOCA Application - storage.
meson.build:333: WARNING: Skipping compilation of DOCA Application - stream_receive_perf.
Run-time dependency doca-argp found: YES 3.2.0118
Run-time dependency doca-flow found: YES 3.2.0118
Run-time dependency doca-dpdk-bridge found: YES 3.2.0118
Dependency doca-common found: YES 3.2.0118 (cached)
Run-time dependency libdpdk found: YES 22.11.2510.1.0
Dependency doca-argp found: YES 3.2.0118 (cached)
Dependency doca-flow found: YES 3.2.0118 (cached)
Dependency doca-dpdk-bridge found: YES 3.2.0118 (cached)
Dependency doca-common found: YES 3.2.0118 (cached)
Dependency libdpdk found: YES 22.11.2510.1.0 (cached)
Run-time dependency json-c found: YES 0.17
Library doca_flow_tune_server found: YES
meson.build:333: WARNING: Skipping compilation of DOCA Application - urom_rdmo.
meson.build:333: WARNING: Skipping compilation of DOCA Application - virtiofs.
meson.build:333: WARNING: Skipping compilation of DOCA Application - yara_inspection.
Build targets in project: 2

Found ninja-1.11.1 at /usr/bin/ninja
ninja: Entering directory `/tmp/build'
[1/28] Compiling C object switch/doca_switch.p/.._common_utils.c.o
[2/28] Compiling C object switch/doca_switch.p/.._.._samples_common.c.o
[3/28] Compiling C object switch/doca_switch.p/switch.c.o
[4/28] Compiling C object switch/doca_switch.p/.._.._samples_doca_flow_flow_common.c.o
[5/28] Compiling C object switch/doca_switch.p/.._.._samples_doca_flow_flow_switch_common.c.o
[6/28] Compiling C object switch/doca_switch.p/.._common_flow_pipes_manager.c.o
[7/28] Compiling C object switch/doca_switch.p/switch_core.c.o
[8/28] Compiling C object switch/doca_switch.p/.._common_flow_parser.c.o
[9/28] Compiling C object switch/doca_switch.p/.._common_dpdk_utils.c.o
[10/28] Compiling C object upf_accel/doca_upf_accel.p/upf_accel.c.o
FAILED: upf_accel/doca_upf_accel.p/upf_accel.c.o 
cc -Iupf_accel/doca_upf_accel.p -Iupf_accel -I../../opt/mellanox/doca/applications/upf_accel -I../../opt/mellanox/doca/applications/common -I.. -I../../opt/mellanox/doca -I../../opt/mellanox/doca/samples -I../../opt/mellanox/doca/samples/doca_flow -I../../opt/mellanox/doca/applications/upf_accel/pfcp -I/opt/mellanox/doca/include -I/usr/include/libnl3 -I/opt/mellanox/dpdk/include/dpdk -I/opt/mellanox/dpdk/include/dpdk/../aarch64-linux-gnu/dpdk -I/usr/include/aarch64-linux-gnu -I/usr/include/dbus-1.0 -I/usr/lib/aarch64-linux-gnu/dbus-1.0/include -I/usr/include/json-c -fdiagnostics-color=always -D_FILE_OFFSET_BITS=64 -Wall -Winvalid-pch -O0 -g '-D DOCA_ALLOW_EXPERIMENTAL_API' -Wno-format-zero-length '-D DOCA_USE_LIBC_STRING_L_FUNC' -include rte_config.h -mcpu=cortex-a72 -include rte_config.h -mcpu=cortex-a72 -pthread -DALLOW_EXPERIMENTAL_API -Wno-missing-braces -Wno-missing-field-initializers -MD -MQ upf_accel/doca_upf_accel.p/upf_accel.c.o -MF upf_accel/doca_upf_accel.p/upf_accel.c.o.d -o upf_accel/doca_upf_accel.p/upf_accel.c.o -c ../../opt/mellanox/doca/applications/upf_accel/upf_accel.c
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c: In function ‘upf_accel_smf_rules_add’:
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:655:9: warning: passing argument 4 of ‘doca_flow_pipe_add_entry_v1’ makes integer from pointer without a cast [-Wint-conversion]
  655 |         NULL,                        // Actions (using pipe default)
      |         ^~~~
      |         |
      |         void *
In file included from /opt/mellanox/doca/include/doca_flow.h:3277,
                 from ../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:36:
/opt/mellanox/doca/include/doca_ctsd_flow.h:1154:142: note: expected ‘uint8_t’ {aka ‘unsigned char’} but argument is of type ‘void *’
 1154 | doca_error_t doca_flow_pipe_add_entry_v1(uint16_t pipe_queue, struct doca_flow_pipe * pipe, const struct doca_flow_match_v1 * match, uint8_t action_idx, const struct doca_flow_actions_v1 * actions, const struct doca_flow_monitor_v1 * mon, const struct doca_flow_fwd_v1 * fwd, uint32_t flags, void* usr_ctx, struct doca_flow_pipe_entry** entry);
      |                                                                                                                                      ~~~~~~~~^~~~~~~~~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:659:9: warning: passing argument 8 of ‘doca_flow_pipe_add_entry_v1’ makes integer from pointer without a cast [-Wint-conversion]
  659 |         NULL,                        // User context
      |         ^~~~
      |         |
      |         void *
/opt/mellanox/doca/include/doca_ctsd_flow.h:1154:286: note: expected ‘uint32_t’ {aka ‘unsigned int’} but argument is of type ‘void *’
 1154 | doca_error_t doca_flow_pipe_add_entry_v1(uint16_t pipe_queue, struct doca_flow_pipe * pipe, const struct doca_flow_match_v1 * match, uint8_t action_idx, const struct doca_flow_actions_v1 * actions, const struct doca_flow_monitor_v1 * mon, const struct doca_flow_fwd_v1 * fwd, uint32_t flags, void* usr_ctx, struct doca_flow_pipe_entry** entry);
      |                                                                                                                                                                                                                                                                                     ~~~~~~~~~^~~~~
/opt/mellanox/doca/include/doca_ctsd_flow.h:489:53: error: too few arguments to function ‘doca_flow_pipe_add_entry_v1’
  489 | #define doca_flow_pipe_add_entry_versioned(VERSION) doca_flow_pipe_add_entry_v##VERSION
      |                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~
/opt/mellanox/doca/include/doca_ctsd_flow.h:490:57: note: in expansion of macro ‘doca_flow_pipe_add_entry_versioned’
  490 | #define doca_flow_pipe_add_entry_versioned_mid(VERSION) doca_flow_pipe_add_entry_versioned(VERSION)
      |                                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/opt/mellanox/doca/include/doca_ctsd_flow.h:491:34: note: in expansion of macro ‘doca_flow_pipe_add_entry_versioned_mid’
  491 | #define doca_flow_pipe_add_entry doca_flow_pipe_add_entry_versioned_mid(LIB_FLOW_VERSION)
      |                                  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:651:14: note: in expansion of macro ‘doca_flow_pipe_add_entry’
  651 |     result = doca_flow_pipe_add_entry(
      |              ^~~~~~~~~~~~~~~~~~~~~~~~
/opt/mellanox/doca/include/doca_ctsd_flow.h:1154:14: note: declared here
 1154 | doca_error_t doca_flow_pipe_add_entry_v1(uint16_t pipe_queue, struct doca_flow_pipe * pipe, const struct doca_flow_match_v1 * match, uint8_t action_idx, const struct doca_flow_actions_v1 * actions, const struct doca_flow_monitor_v1 * mon, const struct doca_flow_fwd_v1 * fwd, uint32_t flags, void* usr_ctx, struct doca_flow_pipe_entry** entry);
      |              ^~~~~~~~~~~~~~~~~~~~~~~~~~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:669:40: error: ‘port_ingress’ undeclared (first use in this function)
  669 |     result = doca_flow_entries_process(port_ingress, queue_id, 0, 0);
      |                                        ^~~~~~~~~~~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:669:40: note: each undeclared identifier is reported only once for each function it appears in
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:669:54: error: ‘queue_id’ undeclared (first use in this function)
  669 |     result = doca_flow_entries_process(port_ingress, queue_id, 0, 0);
      |                                                      ^~~~~~~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:678:62: error: ‘port_egress’ undeclared (first use in this function)
  678 |     printf("  Forward: Port %u\n", doca_flow_port_switch_get(port_egress));
      |                                                              ^~~~~~~~~~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:634:26: warning: unused variable ‘fwd’ [-Wunused-variable]
  634 |     struct doca_flow_fwd fwd = {0};
      |                          ^~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:633:30: warning: unused variable ‘actions_decap’ [-Wunused-variable]
  633 |     struct doca_flow_actions actions_decap = {0};
      |                              ^~~~~~~~~~~~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c: In function ‘upf_accel_apply_pending_smf_cfg’:
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:1641:44: warning: initialization discards ‘const’ qualifier from pointer target type [-Wdiscarded-qualifiers]
 1641 |         struct upf_accel_config *cur_cfg = upf_accel_ctx->upf_accel_cfg;
      |                                            ^~~~~~~~~~~~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c: At top level:
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:557:21: warning: ‘pipe_shared_meter_insert’ defined but not used [-Wunused-function]
  557 | static doca_error_t pipe_shared_meter_insert(struct upf_accel_ctx *upf_accel_ctx, uint32_t pdr_idx, uint32_t qer_idx)
      |                     ^~~~~~~~~~~~~~~~~~~~~~~~
../../opt/mellanox/doca/applications/upf_accel/upf_accel.c:474:21: warning: ‘upf_accel_tx_counters_insert’ defined but not used [-Wunused-function]
  474 | static doca_error_t upf_accel_tx_counters_insert(struct upf_accel_ctx *upf_accel_ctx,
      |                     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
[11/28] Compiling C object upf_accel/doca_upf_accel.p/pfcp_pfcp_util.c.o
[12/28] Compiling C object upf_accel/doca_upf_accel.p/upf_accel_smf_default_init.c.o
[13/28] Compiling C object upf_accel/doca_upf_accel.p/upf_accel_json_parser.c.o
[14/28] Compiling C object upf_accel/doca_upf_accel.p/pfcp_pfcp_main.c.o
[15/28] Compiling C object upf_accel/doca_upf_accel.p/upf_accel_print_header.c.o
[16/28] Compiling C object upf_accel/doca_upf_accel.p/pfcp_pfcp_heartbeat.c.o
[17/28] Compiling C object upf_accel/doca_upf_accel.p/upf_accel_pipeline.c.o
[18/28] Compiling C object upf_accel/doca_upf_accel.p/upf_accel_flow_processing.c.o
[19/28] Linking target switch/doca_switch
ninja: build stopped: subcommand failed.
make: *** [Makefile:41: build] Error 1
